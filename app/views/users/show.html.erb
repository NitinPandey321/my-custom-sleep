<div class="page-header d-flex justify-content-between", style="padding: 20px;">
  <h2>My Profile</h2>
  <div>
    <%= link_to "Back to Dashboard", root_path, class: "btn btn-outline-secondary me-2" %>
    <%= link_to "Edit Profile", edit_user_path(@user), class: "btn btn-primary" %>
  </div>
</div>

<div class="card mb-4">
  <div class="card-body">
    <dl class="profile-info">
      <dt>Name</dt>
      <dd><%= @user.first_name %> <%= @user.last_name %></dd>

      <dt>Email</dt>
      <dd><%= @user.email %></dd>

      <dt>Mobile</dt>
      <dd><%= @user.full_phone.presence || "-" %></dd>

      <dt>Role</dt>
      <dd><%= @user.role.capitalize %></dd>
    </dl>
  </div>
</div>

<div data-controller="password-toggle" class="card">
  <div class="card-header">
    <button class="btn btn-secondary" data-action="click->password-toggle#toggleForm">
      Change Password
    </button>
  </div>

  <div class="card-body" data-password-toggle-target="form" style="display: none;">
    <%= form_with(model: @user, url: change_password_user_path(@user), method: :patch, local: true) do |f| %>
      
      <div class="form-group mb-3">
        <%= f.label :current_password, "Current Password" %>
        <%= f.password_field :current_password, class: "form-control", required: true %>
      </div>

      <div class="form-group mb-3">
        <%= f.label :password, "New Password" %>
        <%= f.password_field :password, class: "form-control", required: true %>
      </div>

      <div class="form-group mb-3">
        <%= f.label :password_confirmation, "Confirm New Password" %>
        <%= f.password_field :password_confirmation, class: "form-control", required: true %>
      </div>

      <%= f.submit "Update Password", class: "btn btn-warning" %>
    <% end %>
  </div>
</div>
