<div class="edit-client">
<div class="page-header">
  <h2>Edit Profile</h2>
</div>

<div class="card">
  <div class="card-body">
  <%= form_with model: @user, local: true, 
        class: "auth-form", 
        data: { 
          controller: "form-validation",
          form_validation_target: "form",
          action: "submit->form-validation#validateForm"
        } do |f| %>
         <div aria-live="polite" class="sr-only" data-form-validation-target="liveRegion"></div>
      <div class="form-row">
        <div class="input-group">
          <%= f.label :first_name, class: "input-label" %>
          <%= f.text_field :first_name, class: "form-input",
          data: { form_validation_target: "firstNameInput" } %>
          <div id="first-name-error" class="validation-error" data-form-validation-target="firstNameError"></div>
        </div>

        <div class="input-group">
          <%= f.label :last_name, class: "input-label" %>
          <%= f.text_field :last_name, class: "form-input",
          data: { form_validation_target: "lastNameInput" } %>
          <div id="last-name-error" class="validation-error" data-form-validation-target="lastNameError"></div>
        </div>
      </div>

      <div class="form-row">
        <div class="input-group">
          <%= f.label :gender, class: "input-label" %>
          <%= f.select :gender, 
              options_for_select([
                ['Male', 'male'],
                ['Female', 'female'],
                ['Other', 'other'],
                ['Prefer not to say', 'prefer_not_to_say']
              ], @user.gender), 
              { prompt: 'Select Gender' }, 
              { class: "form-input" } %>
          <div class="validation-error"></div>
        </div>

        <div class="input-group">
          <!-- Empty space for symmetry -->
        </div>
      </div>

      <div class="form-group">
        <%= f.label :email %>
        <%= f.email_field :email, class: "form-input",
        data: { form_validation_target: "emailInput" } %>
        <div id="email-error" class="error-message" data-form-validation-target="emailError"></div>
      </div>

      <%= render 'shared/phone_input', form: f %>

      <div class="form-group">
        <%= f.label :profile_picture, "Profile Image" %>
        <%= f.file_field :profile_picture, class: "form-control" %>
      </div>

      <div class="form-actions">
        <%= f.submit "Save Changes", class: "btn btn-primary" %>
        <%= link_to "Cancel", user_path(@user), class: "btn btn-secondary" %>
      </div>
    <% end %>
  </div>
</div>
</div>
