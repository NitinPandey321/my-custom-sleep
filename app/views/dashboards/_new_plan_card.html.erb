<div class="card create-plan">
  <div class="card-header">
    <h3>Create New Plan</h3>
    <button class="close-btn" onclick="window.location='<%= dashboards_coach_path %>'">
      &times;
    </button>
  </div>
  <div style="margin-bottom: 20px;">
    <%= render 'dashboards/client/client', client: client, show_actions: false %>
  </div>

  <%= form_with model: Plan.new, url: plans_path, local: true, class: "plan-form" do |f| %>
    <div class="form-group">
      <%= f.hidden_field :user_id, value: client.id %>
      <%= f.label :wellness_pillar, "Wellness Pillar" %>
      <%= f.select :wellness_pillar,
            Plan.wellness_pillars.keys.map { |k| [k.titleize, k] },
            { prompt: "Select a pillar..." },
            class: "form-control select-control" %>
    </div>

   <div class="form-group">
      <%= f.label :details, "Plan Details" %>
      <%= f.text_area :details, placeholder: "Enter plan details...", rows: 4, class: "form-control textarea-control" %>
    </div>

    <div class="form-row">
      <div class="form-group">
        <%= f.label :duration, "Due Date time" %>
        <%= f.datetime_local_field :duration, class: "form-control", min: Time.current.strftime("%Y-%m-%dT%H:%M") %>
      </div>

      <div class="form-group">
        <%= f.label :reminder_time, "Reminder (in minutes before due)" %>
        <%= f.number_field :reminder_time, class: "form-control", placeholder: "e.g. 60" %>
      </div>
    </div>

    <div class="form-actions">
      <%= f.submit "+ Plan", class: "btn-plan" %>
    </div>
  <% end %>
</div>
