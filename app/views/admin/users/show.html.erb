<div class="admin-card">
  <h1 class="admin-title">User Details</h1>

  <div class="admin-details">
    <p><span class="label">Name:</span> <%= @user.full_name %></p>
    <p><span class="label">Email:</span> <%= @user.email %></p>
    <p><span class="label">Status:</span> <%= @user.status %></p>
    <p><span class="label">Role:</span> <%= @user.role %></p>
    <p><span class="label">Active:</span> <%= @user.deactivated? ? "No" : "Yes" %></p>
    <p><span class="label">Deactivated:</span> <%= @user.deactivated? ? "Yes" : "No" %></p>

    <% if @user.role == "coach" %>
      <p><span class="label">Clients:</span> <%= @user.clients.count %></p>

      <% if @user.clients.any? %>
        <div class="admin-subsection">
          <h2>Client List</h2>
          <ul>
            <% @user.clients.each do |client| %>
              <li>
                <%= client.full_name %> â€“ <%= client.email %>
                (<%= link_to "View", admin_user_path(client) %>)
              </li>
            <% end %>
          </ul>
        </div>
      <% end %>

    <% elsif @user.role == "client" %>
      <p><span class="label">Assigned Coach:</span> 
        <%= @user.coach.present? ? @user.coach.full_name : "Not Assigned" %>
      </p>
    <% end %>

    <hr>
    <p><span class="label">Average Response Time:</span> <%= format_response_time(@user.avg_response_time) %></p>

    <hr>
    <p><span class="label">Created At:</span> <%= @user.created_at.strftime("%B %d, %Y %H:%M") %></p>
    <p><span class="label">Updated At:</span> <%= @user.updated_at.strftime("%B %d, %Y %H:%M") %></p>
  </div>

  <div class="admin-actions">
    <%= link_to "Edit", edit_admin_user_path(@user), class: "btn btn-primary" %>
    <%= link_to "Back to Users", admin_users_path, class: "btn btn-secondary" %>
  </div>
</div>
