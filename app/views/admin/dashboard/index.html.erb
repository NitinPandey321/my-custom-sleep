<!-- app/views/admin/dashboard/index.html.erb -->
<div class="dashboard-header">
  <h1>Admin Dashboard</h1>
  <p class="dashboard-subtitle">Overview of your Sleep Journey platform metrics</p>
</div>

<section class="dashboard-metrics">
  <%= link_to admin_users_path, class: "metric-card metric-card--users" do %>
    <div class="metric-icon">ğŸ‘¥</div>
    <div class="metric-content">
      <div class="metric-label">Total Users</div>
      <div class="metric-value"><%= @total_users %></div>
    </div>
  <% end %>

  <%= link_to admin_users_path(role: 'client'), class: "metric-card metric-card--clients" do %>
    <div class="metric-icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦</div>
    <div class="metric-content">
      <div class="metric-label">Total Clients</div>
      <div class="metric-value"><%= @total_clients %></div>
    </div>
  <% end %>

  <%= link_to admin_users_path(role: 'coach'), class: "metric-card metric-card--coaches" do %>
    <div class="metric-icon">ğŸ§‘â€ğŸ«</div>
    <div class="metric-content">
      <div class="metric-label">Total Coaches</div>
      <div class="metric-value"><%= @total_coaches %></div>
    </div>
  <% end %>

  <%= link_to admin_plans_path, class: "metric-card metric-card--plans" do %>
    <div class="metric-icon">ğŸ“‹</div>
    <div class="metric-content">
      <div class="metric-label">Total Plans</div>
      <div class="metric-value"><%= @total_plans %></div>
    </div>
  <% end %>

  <%= link_to admin_plans_path(status: 'pending'), class: "metric-card metric-card--pending" do %>
    <div class="metric-icon">â³</div>
    <div class="metric-content">
      <div class="metric-label">Pending Plans</div>
      <div class="metric-value"><%= @pending_plans %></div>
    </div>
  <% end %>
</section>

<div class="dashboard-actions">
  <%= link_to "Manage Users", admin_users_path, class: "admin-btn" %>
  <%= link_to "Manage Plans", admin_plans_path, class: "admin-btn" %>
</div>

<section class="dashboard-top-coaches">
  <h2>Top Coaches by Platform Usage</h2>

  <% if @top_coaches.any? %>
    <table class="top-coaches-table">
      <thead>
        <tr>
          <th>Coach Name</th>
          <th>Email</th>
          <th>Total Time Spent</th>
        </tr>
      </thead>
      <tbody>
        <% @top_coaches.each do |coach| %>
          <tr>
            <td><%= coach.full_name %></td>
            <td><%= coach.email %></td>
            <td>
              <%= hours_minutes(coach.total_seconds) %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% else %>
    <p>No coaches have logged activity yet.</p>
  <% end %>
</section>
